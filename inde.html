<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã¾ãªï½ã¶ V1.5 -N.Sä¼ç”» ãŠå®¢æ§˜ã‚·ã‚¹ãƒ†ãƒ </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <div id="header-status" class="text-xs text-gray-400"></div>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Fira+Code&display=swap');
        body { font-family: 'Noto Sans JP', sans-serif; background-color: #f3f4f6; }
        .code-font { font-family: 'Fira Code', monospace; }
        .highlight { background: linear-gradient(transparent 70%, #fef08a 70%); font-weight: bold; }
        .warning { color: #ef4444; font-weight: bold; }
        .mission-box { border: 3px dashed #eab308; background-color: #fffbeb; padding: 20px; border-radius: 12px; margin: 20px 0; }
        .usage-box { border-left: 4px solid #3b82f6; background-color: #eff6ff; padding: 10px 15px; margin: 15px 0; font-size: 0.9rem; }
        .editor-bg { background-color: #1e293b; }
        .result-bg { background-color: #000000; color: #10b981; }
        .hidden { display: none; }
        .btn-locked { opacity: 0.5; cursor: not-allowed; background-color: #9ca3af !important; }
        .error-wave { text-decoration: underline wavy red; }
    </style>
</head>
<body class="h-screen flex flex-col">

    <!--ä¸Šéƒ¨ãŠå®¢æ§˜ç´¹ä»‹éƒ¨åˆ†-->
    <header class="bg-white border-b px-6 py-3 flex justify-between items-center shrink-0 shadow-sm z-10">
        <div class="flex items-center gap-4">
            <IMG SRC="https://static.wixstatic.com/media/8b23c7_07d2786b9f894d079a46468012ac8a0c~mv2.png/v1/fill/w_204,h_204,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/N_S%E4%BC%81%E7%94%BB%20%E3%83%AD%E3%82%B4.png" "width:20%; height:auto";>
            <div style="
            background-color:#3b82f6;
            color:white;
            font-weight:bold;
            padding:6px 12px;
            border-radius:6px;
            display:inline-block;
            ">
            N.Sä¼ç”»ãŠå®¢æ§˜ã‚·ã‚¹ãƒ†ãƒ <br>ã¾ãªï½ã¶
        </div>
        </div>
        <div class="flex items-center gap-6 text-sm">
            <div class="text-right">
                <div class="text-gray-400 text-xs" id="header-date"></div>
                <div class="font-bold text-gray-800">ã‚µã‚¤ãƒˆä¼šå“¡ <span id="header-user"></span> æ§˜</div>
            </div>
            <button onclick="app.showHome()" class="bg-gray-100 hover:bg-gray-200 text-gray-600 px-3 py-1 rounded">
                <i class="fas fa-home"></i>
            </button>
        </div>
    </header>

    <!-- ãƒ›ãƒ¼ãƒ ç”»é¢ -->
    <div id="view-home" class="flex-grow flex flex-col items-center justify-center p-6">
        <div class="text-center mb-10">
            <h1 class="text-3xl font-bold text-gray-800 mb-2" id="welcome-msg">æ§˜ ã“ã‚“ã«ã¡ã¯ï¼</h1>
            <H1 class="font-bold text-gray-800 mb-2" >N.Sä¼ç”» ãŠå®¢æ§˜ã‚·ã‚¹ãƒ†ãƒ </H1>
            <H1 class="text-5xl font-bold text-gray-800 mb-2" ><FONT FACE="serif">ã¾ãªï½ã¶</FONT><B></B></H1>
            <p class="text-gray-800 text-lg">
                ã¾ãªï½ã¶ã¯N.Sä¼ç”»ã®ãŠå®¢æ§˜ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚<br>
                ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å­¦ç¿’ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ãŠç”³è¾¼ã¿ã¾ã§ã€æ§˜ã€…ãªã‚·ã‚¹ãƒ†ãƒ ã‚’ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚
            </p>
            

            
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl w-full">
            <div onclick="app.showCourseSelect()" class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all cursor-pointer border-b-8 border-blue-500 transform hover:-translate-y-1">
                <i class="fas fa-code text-5xl text-blue-500 mb-4"></i>
                <h3 class="text-xl font-bold mb-2">ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å­¦ç¿’</h3>
                <p class="text-gray-600 text-sm">Pythonãªã©ã€å®Ÿéš›ã«æ‰‹ã‚’å‹•ã‹ã—ã¦å­¦ã¹ã‚‹ä¸­å¿ƒã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚</p>
                <p> <BR>â€»ç§»å‹•ãŒé…ã„å ´åˆãŒã‚ã‚Šã¾ã™</p>
            </div>
            <div class="bg-white p-8 rounded-2xl shadow-lg opacity-60 border-b-8 border-gray-300">
                <i class="fas fa-comments text-5xl text-gray-400 mb-4"></i>
                <h3 class="text-xl font-bold mb-2 text-gray-400">ç›¸è«‡ã‚µãƒ¼ãƒ“ã‚¹</h3>
                <p class="text-gray-600 text-sm">ï¼ˆç¾åœ¨æº–å‚™ä¸­ï¼‰ITã®ãŠæ‚©ã¿ã‚’è§£æ±ºã—ã¾ã™ã€‚</p>
            </div>
            <div class="bg-white p-8 rounded-2xl shadow-lg opacity-60 border-b-8 border-gray-300">
                <i class="fas fa-comments text-5xl text-gray-400 mb-4"></i>
                <h3 class="text-xl font-bold mb-2 text-gray-400">å„ç¨®ãŠç”³è¾¼ã¿</h3>
                <p class="text-gray-600 text-sm">ï¼ˆç¾åœ¨æº–å‚™ä¸­ï¼‰ã‚»ãƒŸãƒŠãƒ¼,AIç›¸è«‡WEBå—ä»˜,ãƒ‡ã‚¸ã‚¿ãƒ«SEIã‚µãƒ¼ãƒ“ã‚¹ã®ãŠç”³ã—è¾¼ã¿ã‚’ã„ãŸã ã‘ã¾ã™</p>
            </div>
            <div class="bg-white p-8 rounded-2xl shadow-lg opacity-60 border-b-8 border-gray-300">
                <i class="fas fa-lightbulb text-5xl text-green-500 mb-4"></i>
                <h3 class="text-xl font-bold mb-2 text-gray-400">AIè±†çŸ¥è­˜</h3>
                <p class="text-gray-600 text-sm">ï¼ˆç¾åœ¨æº–å‚™ä¸­ï¼‰ãƒ‡ã‚¸ã‚¿ãƒ«ã®è±†çŸ¥è­˜ã‚’ç™ºä¿¡ã—ã¦ã„ã¾ã™ã€‚</p>
            </div>
        </div>
    </div>

    <!-- 2. ã‚³ãƒ¼ã‚¹é¸æŠç”»é¢ -->
    <div id="view-course-select" class="flex-grow hidden p-10">
        <h2 class="text-3xl font-bold mb-8 text-center text-gray-800">å­¦ç¿’ã‚³ãƒ¼ã‚¹ã‚’é¸ã‚“ã§ãã ã•ã„</h2>
        <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6">
            <div onclick="app.startCourse('python')" class="bg-white p-6 rounded-xl border-2 border-transparent hover:border-blue-500 cursor-pointer shadow-sm flex items-center gap-6">
                <div class="bg-blue-100 p-4 rounded-full"><i class="fab fa-python text-4xl text-blue-600"></i></div>
                <div>
                    <h4 class="text-xl font-bold">PythonåŸºç¤ã‚³ãƒ¼ã‚¹</h4>
                    <p class="text-gray-500 text-sm">AIã‚„è‡ªå‹•åŒ–ã«å¼·ã„Pythonã‚’ã‚¼ãƒ­ã‹ã‚‰å­¦ã³ã¾ã™ã€‚</p>
                </div>
            </div>
            <div class="bg-gray-50 p-6 rounded-xl border-2 border-dashed border-gray-300 flex items-center gap-6 opacity-50">
                <div class="bg-gray-200 p-4 rounded-full"><i class="fas fa-calculator text-4xl text-gray-400"></i></div>
                <div>
                    <h4 class="text-xl font-bold font-gray-400">Pythonã‚²ãƒ¼ãƒ  (æº–å‚™ä¸­)</h4>
                    <p class="text-gray-500 text-sm">Pythonã§ã‚²ãƒ¼ãƒ ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ï¼</p>
                </div>
            </div>
            
        </div>
    </div>

    <!--  å­¦ç¿’ç”»é¢ -->
    <main id="view-learning" class="flex-grow hidden overflow-hidden bg-white">
        <div class="flex h-full w-full">
            <div class="w-1/2 overflow-y-auto p-10 border-r" id="slide-container">
                <div id="slide-content"></div>
                <div class="mt-12 flex justify-between items-center border-t pt-6">
                    <button id="btn-prev" onclick="app.prevSlide()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-arrow-left mr-2"></i> å‰ã¸
                    </button>
                    <div class="text-sm font-bold text-gray-400">
                        <span id="current-page">1</span> / <span id="total-pages"></span>
                    </div>
                    <button id="btn-next" onclick="app.nextSlide()" class="bg-blue-600 text-white px-8 py-3 rounded-full font-bold shadow-lg transition btn-locked" disabled>
                        æ¬¡ã¸é€²ã‚€ <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            <div class="w-1/2 flex flex-col editor-bg">
                <div class="bg-slate-700 text-white p-2 text-xs flex justify-between items-center">
                    <span><i class="fas fa-code text-yellow-400 mr-2"></i>ã‚¨ãƒ‡ã‚£ã‚¿ (Python æ­è¼‰)</span>
                    <span id="mission-status" class="text-red-400 font-bold">â— MISSION æœªã‚¯ãƒªã‚¢</span>
                </div>
                <textarea id="code-editor" class="flex-grow w-full editor-bg text-blue-100 p-6 code-font outline-none resize-none text-lg" spellcheck="false" placeholder="# ã“ã“ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ãã ã•ã„"></textarea>
                <button onclick="app.runCode()" class="bg-orange-600 hover:bg-orange-700 text-white py-4 font-bold transition flex justify-center items-center gap-2">
                    <i class="fas fa-play"></i> ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ã¦MISSIONã‚’åˆ¤å®šã™ã‚‹ã€‚
                </button>
                <div class="h-1/3 flex border-t-2 border-slate-900">
                    <div class="w-1/2 flex flex-col border-r border-slate-800">
                        <div class="bg-black text-gray-500 text-[10px] px-2 py-1 uppercase font-bold">å®Ÿè¡Œçµæœ</div>
                        <div id="output-console" class="flex-grow result-bg p-4 code-font text-sm overflow-y-auto whitespace-pre"></div>
                    </div>
                    <div class="w-1/2 flex flex-col bg-white">
                        <div class="bg-gray-100 text-gray-500 text-[10px] px-2 py-1 uppercase font-bold">ã‚¢ãƒ‰ãƒã‚¤ã‚¹ ãã®ä»–</div>
                        <div id="feedback-area" class="flex-grow p-4 text-sm text-gray-600 overflow-y-auto leading-relaxed"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-white border-t px-6 py-2 flex justify-between items-center text-[10px] text-gray-400 shrink-0">
        <div>ğŸ„«N.Sä¼ç”» -ã¾ãªï½ã¶</div>
        <div id="footer-links">
            <a href="https://nskikakusabu.wixsite.com/nskikaku-2" target="_blank" class="hover:underline">å…¬å¼ã‚µã‚¤ãƒˆã¸ç§»å‹•ã™ã‚‹</a>
        </div>
    </footer>

    <script>
        const app = {
            state: {
                nickname: localStorage.getItem('mana-bu-user') || '',
                currentView: 'home',
                currentIndex: 0,
                pyodide: null,
                missionCleared: false
            },

            // --- ã‚¹ãƒ©ã‚¤ãƒ‰---
            slides: [
                 {
                    title: "Pythonã®ä¸–ç•Œã¸ã‚ˆã†ã“ã",
                    content: `<p>ã€Œã¾ãªï½ã¶ã€ã¸ã‚ˆã†ã“ãã€‚<br>ã“ã“ã§ã¯<span style="color:#5a67d8; font-weight:bold;">Pythonï¼ˆãƒ‘ã‚¤ã‚½ãƒ³ï¼‰</span>ã¨ã„ã†ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚’å­¦ã³ã¾ã™ã€‚</p>
                     <p>é›£ã—ãè€ƒãˆãªãã¦å¤§ä¸ˆå¤«ã€‚ã‚²ãƒ¼ãƒ æ„Ÿè¦šã§é€²ã‚ã¦ã„ãã¾ã—ã‚‡ã†ï¼</p> `,
                    mission: false
                },
                {
                    title: "Pythonã«ã¤ã„ã¦",
                    content: `<p class="mb-4">Pythonï¼ˆãƒ‘ã‚¤ã‚½ãƒ³ï¼‰ã¯ã€ä»Šä¸–ç•Œã§ä¸€ç•ªäººæ°—ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã™ã€‚</p>
                              <div class="usage-box"><b>ä½¿ã„é“ï¼š</b>YouTubeã‚„Instagramãªã©ã®æœ‰åãªã‚µãƒ¼ãƒ“ã‚¹ã‚‚Pythonã§ä½œã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</div>`,
                    mission: false
                },
                {
                    title: "PythonãŒã§ãã‚‹ã“ã¨",
                    content: `<p class="mb-4">AIã®é–‹ç™ºã€ãƒ‡ãƒ¼ã‚¿ã®åˆ†æã€Webã‚µã‚¤ãƒˆã®ä½œæˆã€è‡ªå‹•ä½œæ¥­ãªã©ã€ã“ã‚Œä¸€ã¤ã§ä½•ã§ã‚‚ã§ãã¾ã™ã€‚</p>
                              <div class="usage-box"><b>ä½¿ã„é“ï¼š</b>ã€Œæ¯æ—¥ã‚„ã£ã¦ã„ã‚‹é¢å€’ãªExcelä½œæ¥­ã€ã‚’è‡ªå‹•åŒ–ã™ã‚‹ã®ã«ã‚ˆãä½¿ã‚ã‚Œã¾ã™ã€‚</div>`,
                    mission: false
                },
                {
                   title: "åŸºæœ¬ãƒ«ãƒ¼ãƒ«ï¼šåŠè§’ã‚’ä½¿ã†",
        content: `
            <p>ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§ä¸€ç•ªå¤§åˆ‡ãªãƒ«ãƒ¼ãƒ«ã€‚</p>
            <p>ãã‚Œã¯<span class="wavy-error" style="color:#e53e3e; font-weight:bold;">ã€Œå…¨è§’æ–‡å­—ã€ã‚’ä½¿ã‚ãªã„ã“ã¨</span>ã§ã™ã€‚</p>
            <div class="code-block">
                <div style="
                background:#0f172a;
                color:#e5e7eb;
                border-radius:8px;
                padding:16px;
                font-family:Consolas, 'Courier New', monospace;
                font-size:14px;
                line-height:1.6;
                box-shadow:0 10px 30px rgba(0,0,0,0.3);
                overflow-x:auto;
                ">
                <pre style="margin:0;"><code>
                    âŒ print("ã‚ã„ã†ãˆãŠ") <span style="color:#aaa">// æ‹¬å¼§ãŒå…¨è§’ã ã¨å‹•ã‹ãªã„</span><br>
                    â­• print("abc")      <span style="color:#aaa">// åŠè§’ãªã‚‰OKï¼</span>
                </code></pre>
                </div>
                
            </div>`,
                    mission: false
                },
                {
                    title: "1. ãƒ—ãƒªãƒ³ãƒˆ (print)",
                    content: `<p class="mb-4"><code>print</code>ã¯ã€ç”»é¢ã«æ–‡å­—ã‚’è¡¨ç¤ºã•ã›ã‚‹ãŸã‚ã®å‘½ä»¤ã§ã™ã€‚</p>
                              <div class="usage-box"><b>ä½¿ã„é“ï¼š</b>ã‚·ã‚¹ãƒ†ãƒ ãŒæ­£å¸¸ã«å‹•ã„ã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ãŸã‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ã®ã«ä½¿ã„ã¾ã™ã€‚</div>
                              <div class="mission-box font-bold">ã€MISSIONã€‘<br>print("ã“ã‚“ã«ã¡ã¯") ã¨å…¥åŠ›ã—ã¦å®Ÿè¡Œã—ã‚ˆã†ï¼</div>
                              <div style="
                              background:#0f172a;
                              color:#e5e7eb;
                              border-radius:8px;
                              padding:16px;
                              font-family:Consolas, 'Courier New', monospace;
                              font-size:14px;
                              line-height:1.6;
                              box-shadow:0 10px 30px rgba(0,0,0,0.3);
                              overflow-x:auto;
                              ">
                              <pre style="margin:0;"><code>
                                ä¾‹ print("æ–‡ç« ")ã€€<<â€ã‚’å¿˜ã‚Œãšã«ï¼>>
                                </code></pre>
                                </div> `,
                    goal: "ã“ã‚“ã«ã¡ã¯"
                },
                {
                    title: "2. è¨ˆç®—ï¼šè¶³ã—ç®—ãƒ»å¼•ãç®—",
                    content: ` <p>ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã¯è¨ˆç®—ã®å¤©æ‰ã§ã™ã€‚</p>
                    <p>æ•°å­—ã®è¨ˆç®—ã«ã¯ <code>"</code> ã¯ä¸è¦ã§ã™ã€‚</p>
                    <div class="mission-box font-bold">ã€MISSIONã€‘<br>print(100 + 50) ã¨å…¥åŠ›ã—ã¦å®Ÿè¡Œã—ã‚ˆã†ï¼</div>
                    <div style="
                              background:#0f172a;
                              color:#e5e7eb;
                              border-radius:8px;
                              padding:16px;
                              font-family:Consolas, 'Courier New', monospace;
                              font-size:14px;
                              line-height:1.6;
                              box-shadow:0 10px 30px rgba(0,0,0,0.3);
                              overflow-x:auto;
                              ">
                              <pre style="margin:0;"><code>
                                ä¾‹ print(è¨ˆç®—)ã€€<<â€ã¯ã„ã‚Šã¾ã›ã‚“>>
                                </code></pre>
                                </div> `,
                    
                    goal: "150"
                },
                {
                    title: "3. è¨ˆç®—ï¼šæ›ã‘ç®—ãƒ»å‰²ã‚Šç®—",
                    content: `<p>ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®ä¸–ç•Œã§ã¯ã€æ›ã‘ç®—ã« <code>Ã—</code> ã‚’ä½¿ã„ã¾ã›ã‚“ã€‚ä»£ã‚ã‚Šã« <code>*</code> (ã‚¢ã‚¹ã‚¿ãƒªã‚¹ã‚¯) ã‚’ä½¿ã„ã¾ã™ã€‚
                        </p>å‰²ã‚Šç®—ã¯<code>/</code>ï¼ˆã‚¹ãƒ©ãƒƒã‚·ãƒ¥ï¼‰ã‚’ä½¿ã„ã¾ã™ã€‚  
                              <div class="usage-box"><b>ä½¿ã„é“ï¼š</b>æ¶ˆè²»ç¨ã®è¨ˆç®—ï¼ˆ* 1.1ï¼‰ã‚„ã€å¹³å‡ç‚¹ã‚’å‡ºã™æ™‚ã«ä½¿ã„ã¾ã™ã€‚</div>
                              <div class="mission-box font-bold">ã€MISSIONã€‘<br>print(10 * 8) ã¨å…¥åŠ›ã—ã¦å®Ÿè¡Œã—ã‚ˆã†ï¼</div>`,
                    goal: "80"
                },
                {
                    title: "4. å¤‰æ•° (Variable)",
                    content: `<p class="mb-4">å¤‰æ•°ã¨ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’å…¥ã‚Œã‚‹ã€Œåå‰ä»˜ãã®ç®±ã€ã®ã“ã¨ã§ã™ã€‚<code>name = "N.Sä¼ç”»"</code>ã®ã‚ˆã†ã«æ›¸ãã¾ã™ã€‚</p>
                              <div class="usage-box"><b>ä½¿ã„é“ï¼š</b>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå‰ã‚„ã€ä»Šã®HPï¼ˆä½“åŠ›ï¼‰ãªã©ã‚’ä¿å­˜ã—ã¦ãŠããŸã‚ã«ä½¿ã„ã¾ã™ã€‚</div>
                              <div class="mission-box font-bold">ã€MISSIONã€‘<br>x = 50<br>print(x) <br>ã¨2è¡Œã§æ›¸ã„ã¦ã¿ã‚ˆã†ï¼</div>`,
                    goal: "50"
                },
                {
                    title: "5. ç­”ãˆã‚‹ (input)",
                    content: `<p class="mb-4"><code>input()</code>ã‚’ä½¿ã†ã¨ã€ä½¿ã£ã¦ã„ã‚‹äººã«è³ªå•ã—ã¦ã€ãã®ç­”ãˆã‚’å—ã‘å–ã‚Œã¾ã™ã€‚</p>
                              <div class="usage-box"><b>ä½¿ã„é“ï¼š</b>ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚„ã€ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›ã«ä½¿ã„ã¾ã™ã€‚</div>
                              <div class="mission-box font-bold">ã€MISSIONã€‘<br>a = input()<br>print(a) <br>ã¨å…¥åŠ›ã—ã¦å®Ÿè¡Œã—ã€ä¸‹ã®å…¥åŠ›æ¬„ã«ã€ŒOKã€ã¨å…¥ã‚Œã¦ã¿ã‚ˆã†ï¼</div>`,
                    goal: "OK"
                },
                {
                    title: "6. æ¡ä»¶å¼ (if) - åŸºæœ¬",
                    content: `<p class="mb-4"><code>if</code>ã‚’ä½¿ã†ã¨ã€ã€Œã‚‚ã—ã€œã ã£ãŸã‚‰ã€ã¨ã„ã†æ¡ä»¶åˆ†å²ãŒã§ãã¾ã™ã€‚</p>
                              <div class="usage-box"><b>ä½¿ã„é“ï¼š</b>ã€Œã‚‚ã—ç‚¹æ•°ãŒ80ç‚¹ä»¥ä¸Šãªã‚‰åˆæ ¼ã€ãã†ã§ãªã‘ã‚Œã°ä¸åˆæ ¼ã€ã¨ã„ã£ãŸåˆ¤å®šã«ä½¿ã„ã¾ã™ã€‚</div>
                              <div class="mission-box font-bold">ã€MISSIONã€‘<br>score = 100<br>if score == 100:<br>&nbsp;&nbsp;&nbsp;&nbsp;print("æº€ç‚¹")</div>`,
                    goal: "æº€ç‚¹"
                },
                {
                    title: "7. æ¡ä»¶å¼ (if) - ãã®ä»–",
                    content: `<p class="mb-4">æ¡ä»¶ã«åˆã‚ãªã‹ã£ãŸæ™‚ã¯ <code>else:</code> ã‚’ä½¿ã„ã¾ã™ã€‚</p>
                              <div class="mission-box font-bold">ã€MISSIONã€‘<br>num = 10<br>if num > 20:<br>&nbsp;&nbsp;&nbsp;&nbsp;print("å¤§")<br>else:<br>&nbsp;&nbsp;&nbsp;&nbsp;print("å°")</div>`,
                    goal: "å°"
                },
                {
                    title: "8. ãƒªã‚¹ãƒˆ",
                    content: `<p class="mb-4">è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€ã¤ã«ã¾ã¨ã‚ã‚‹ã®ãŒã€Œãƒªã‚¹ãƒˆã€ã§ã™ã€‚<code>[1, 2, 3]</code>ã®ã‚ˆã†ã«æ›¸ãã¾ã™ã€‚</p>
                              <div class="usage-box"><b>ä½¿ã„é“ï¼š</b>TODOãƒªã‚¹ãƒˆã‚„ã€å•†å“ä¸€è¦§ãªã©ã®ã€Œãƒ‡ãƒ¼ã‚¿ã®é›†ã¾ã‚Šã€ã‚’ç®¡ç†ã™ã‚‹ã®ã«ä½¿ã„ã¾ã™ã€‚</div>
                              <div class="mission-box font-bold">ã€MISSIONã€‘<br>data = [10, 20]<br>print(data[0])</div>`,
                    goal: "10"
                },
                {
                    title: "9. ç¹°ã‚Šè¿”ã— (for)",
                    content: `<p class="mb-4"><code>for</code>ã‚’ä½¿ã†ã¨ã€åŒã˜ä½œæ¥­ã‚’ä½•åº¦ã‚‚è‡ªå‹•ã§ç¹°ã‚Šè¿”ã›ã¾ã™ã€‚</p>
                              <div class="usage-box"><b>ä½¿ã„é“ï¼š</b>100äººåˆ†ã®ãƒ¡ãƒ¼ãƒ«ã‚’è‡ªå‹•ã§é€ä¿¡ã™ã‚‹ã€ã¨ã„ã£ãŸã€Œç¹°ã‚Šè¿”ã—ä½œæ¥­ã€ã«å¿…é ˆã§ã™ã€‚</div>
                              <div class="mission-box font-bold">ã€MISSIONã€‘<br>for i in range(3):<br>&nbsp;&nbsp;&nbsp;&nbsp;print("Hi")</div>`,
                    goal: "Hi\nHi\nHi"
                },
                {
                    title: "10. é–¢æ•° (Function) - å®šç¾©",
                    content: `<p class="mb-4">é–¢æ•°ã¯ã€è¤‡æ•°ã®å‘½ä»¤ã‚’ã²ã¨ã¾ã¨ã‚ã«ã—ãŸã€Œé“å…·ã€ã§ã™ã€‚<code>def</code>ã§ä½œã‚Šã¾ã™ã€‚</p>
                              <div class="usage-box"><b>ä½¿ã„é“ï¼š</b>ã€Œæ¶ˆè²»ç¨ã‚’è¨ˆç®—ã™ã‚‹ã€ã¨ã„ã†å‘½ä»¤ã‚’ä¸€åº¦ä½œã‚Œã°ã€ã©ã“ã§ã‚‚å†åˆ©ç”¨ã§ãã¦ä¾¿åˆ©ã§ã™ã€‚</div>
                              <div class="mission-box font-bold">ã€MISSIONã€‘<br>def greet():<br>&nbsp;&nbsp;&nbsp;&nbsp;print("Hello")</div>`,
                    mission: true, goal_type: "any" 
                },
                {
                    title: "11. é–¢æ•° - å®Ÿè¡Œ",
                    content: `<p class="mb-4">ä½œã£ãŸé–¢æ•°ã¯ã€åå‰ã‚’æ›¸ãã ã‘ã§å®Ÿè¡Œã§ãã¾ã™ã€‚</p>
                              <div class="mission-box font-bold">ã€MISSIONã€‘<br>def say():<br>&nbsp;&nbsp;&nbsp;&nbsp;print("Yes")<br>say()</div>`,
                    goal: "Yes"
                },
                {
                    title: "12. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å°å…¥",
                    content: `<p class="mb-4"><code>import</code>ã‚’ä½¿ã†ã¨ã€ä»–äººãŒä½œã£ãŸä¾¿åˆ©ãªæ©Ÿèƒ½ã‚’ä½¿ãˆã¾ã™ã€‚</p>
                              <div class="usage-box"><b>ä½¿ã„é“ï¼š</b>æ—¥ä»˜ã‚’è¨ˆç®—ã—ãŸã‚Šã€ãƒ©ãƒ³ãƒ€ãƒ ãªæ•°å­—ï¼ˆãŠã¿ãã˜ï¼‰ã‚’ä½œã£ãŸã‚Šã§ãã¾ã™ã€‚</div>
                              <div class="mission-box font-bold">ã€MISSIONã€‘<br>import math<br>print(math.pi)</div>`,
                    mission: true, goal_type: "any"
                },
                {
                    title: "13. ç·åˆæ¼”ç¿’â‘ ",
                    content: `<p class="mb-4">ã“ã‚Œã¾ã§ã®çŸ¥è­˜ã‚’çµ„ã¿åˆã‚ã›ã¦ã€ãŠã¿ãã˜ã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
                              <div class="mission-box font-bold">ã€MISSIONã€‘<br>print("å‰") ã¨è¡¨ç¤ºã•ã›ã¦ã¿ã‚ˆã†ï¼</div>`,
                    goal: "å‰"
                },
                {
                    title: "14. ç·åˆæ¼”ç¿’â‘¡",
                    content: `<p class="mb-4">æœ€å¾Œã¯è‡ªç”±ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã‚¨ãƒ©ãƒ¼ãŒå‡ºãšã«å‹•ã‘ã°ã‚¯ãƒªã‚¢ã§ã™ï¼</p>
                              <div class="mission-box font-bold">ã€MISSIONã€‘<br>å¥½ããªæ–‡å­—ã‚’è¡¨ç¤ºã•ã›ã¦ã¿ã‚ˆã†ã€‚</div>`,
                    mission: true, goal_type: "any"
                },
                {
                    title: "ã‚³ãƒ¼ã‚¹ä¿®äº†ï¼",
                    content: `<h2 class="text-2xl font-bold text-blue-600 mb-4">ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</h2>
                              <p>Pythonã®åŸºç¤ã‚¹ãƒ†ãƒƒãƒ—ã‚’ã™ã¹ã¦ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸã€‚</p>
                              <p class="mt-4 italic">ã€Œã©ãªãŸã§ã‚‚å®‰å¿ƒã—ã¦ãƒ‡ã‚¸ã‚¿ãƒ«ã®æ©æµã‚’å—ã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã€</p>
                              <p>æ¬¡ã®ã€ŒPythonã‚²ãƒ¼ãƒ ã‚³ãƒ¼ã‚¹ã€ã‚‚ã€N.Sä¼ç”»ã§è¿‘æ—¥å…¬é–‹äºˆå®šã§ã™ï¼</p>`,
                    mission: false
                }
            ],

            async init() {
                if (!this.state.nickname) {
                    const name = prompt("ã“ã‚“ã«ã¡ã¯ï¼ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
                    this.state.nickname = name || "ã‚²ã‚¹ãƒˆ";
                    localStorage.setItem('mana-bu-user', this.state.nickname);
                }
                document.getElementById('header-user').innerText = this.state.nickname;
                document.getElementById('welcome-msg').innerText = `ã“ã‚“ã«ã¡ã¯ï¼${this.state.nickname}æ§˜ï¼`;
                document.getElementById('header-date').innerText = new Date().toLocaleDateString();

                try {
                    this.state.pyodide = await loadPyodide();
                    console.log("Python Ready");
                } catch (e) {
                    alert("Pythonã®èµ·å‹•ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
                }
            },

            showHome() {
                this.switchView('view-home');
                document.getElementById('header-status').innerText = "ã‚¢ã‚¯ã‚»ã‚¹ãƒ“ãƒªãƒ†ã‚£ ãƒ›ãƒ¼ãƒ ";
            },

            showCourseSelect() {
                this.switchView('view-course-select');
                document.getElementById('header-status').innerText = "ã‚¢ã‚¯ã‚»ã‚¹ãƒ“ãƒªãƒ†ã‚£ ã‚³ãƒ¼ã‚¹é¸æŠ";
            },

            startCourse(courseId) {
                this.state.currentIndex = 0;
                this.switchView('view-learning');
                document.getElementById('header-status').innerText = "ã‚¢ã‚¯ã‚»ã‚¹ãƒ“ãƒªãƒ†ã‚£ å­¦ç¿’ä¸­";
                this.renderSlide();
            },

            switchView(viewId) {
                ['view-home', 'view-course-select', 'view-learning'].forEach(id => {
                    document.getElementById(id).classList.add('hidden');
                });
                document.getElementById(viewId).classList.remove('hidden');
            },

            renderSlide() {
                const slide = this.slides[this.state.currentIndex];
                document.getElementById('slide-content').innerHTML = `
                    <h2 class="text-3xl font-bold mb-6 text-slate-800">${slide.title}</h2>
                    <div class="text-lg text-slate-600 leading-relaxed">${slide.content}</div>
                `;
                document.getElementById('current-page').innerText = this.state.currentIndex + 1;
                document.getElementById('total-pages').innerText = this.slides.length;
                document.getElementById('btn-prev').style.visibility = this.state.currentIndex === 0 ? 'hidden' : 'visible';

                if (slide.mission === false) {
                    this.unlockNext();
                } else {
                    this.lockNext();
                }
            },

            lockNext() {
                this.state.missionCleared = false;
                const btn = document.getElementById('btn-next');
                btn.disabled = true;
                btn.classList.add('btn-locked');
                document.getElementById('mission-status').innerText = "â— MISSION æœªã‚¯ãƒªã‚¢";
                document.getElementById('mission-status').className = "text-red-400 font-bold";
            },

            unlockNext() {
                this.state.missionCleared = true;
                const btn = document.getElementById('btn-next');
                btn.disabled = false;
                btn.classList.remove('btn-locked');
                document.getElementById('mission-status').innerText = "â— MISSION ã‚¯ãƒªã‚¢ï¼";
                document.getElementById('mission-status').className = "text-green-400 font-bold";
            },

            nextSlide() {
                if (this.state.currentIndex < this.slides.length - 1) {
                    this.state.currentIndex++;
                    this.renderSlide();
                    document.getElementById('output-console').innerText = "";
                    document.getElementById('feedback-area').innerText = "";
                } else {
                    this.showHome();
                }
            },

            prevSlide() {
                if (this.state.currentIndex > 0) {
                    this.state.currentIndex--;
                    this.renderSlide();
                }
            },

            async runCode() {
                const code = document.getElementById('code-editor').value;
                const consoleEl = document.getElementById('output-console');
                const feedbackEl = document.getElementById('feedback-area');
                const slide = this.slides[this.state.currentIndex];

                if (!this.state.pyodide) return alert("Pythonæº–å‚™ä¸­ã§ã™...");

                consoleEl.innerText = "å®Ÿè¡Œä¸­...";
                try {
                    await this.state.pyodide.runPython(`
                        import sys, io
                        sys.stdout = io.StringIO()
                    `);
                    await this.state.pyodide.runPython(code);
                    const result = this.state.pyodide.runPython("sys.stdout.getvalue()").trim();
                    consoleEl.innerText = result || "(è¡¨ç¤ºãªã—)";

                    // ãƒŸãƒƒã‚·ãƒ§ãƒ³åˆ¤å®š
                    if (slide.mission !== false) {
                        if (slide.goal_type === "any" || result === slide.goal) {
                            feedbackEl.innerHTML = "<b class='text-green-600'>OKï¼æ­£è§£ã§ã™ã€‚</b><br>æ¬¡ã®ã‚¹ãƒ©ã‚¤ãƒ‰ãŒã‚¢ãƒ³ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€‚";
                            this.unlockNext();
                            const msg = document.createElement('div');
                msg.className = "fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-yellow-400 text-white px-10 py-5 rounded-2xl shadow-2xl font-bold text-2xl z-50 animate-bounce";
                msg.innerHTML = "ğŸ¯ MISSION CLEAR!!";
                document.body.appendChild(msg);
                setTimeout(() => msg.remove(), 2000);

                        } else {
                            feedbackEl.innerHTML = `<b class='text-orange-500'>ãŠã—ã„ï¼</b><br>çµæœãŒã€Œ${slide.goal}ã€ã«ãªã‚‹ã‚ˆã†ã«æ›¸ãç›´ã—ã¦ã¿ã‚ˆã†ã€‚`;
                        }
                    }
                } catch (err) {
                    consoleEl.innerText = "ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ";
                    let msg = err.message;
                    if (msg.includes("IndentationError")) {
                        feedbackEl.innerHTML = "<b class='text-red-500'>ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚¨ãƒ©ãƒ¼</b><br>ifã‚„forã®æ¬¡ã®è¡Œã«ã¯ã€ŒåŠè§’ã‚¹ãƒšãƒ¼ã‚¹4ã¤ã€ãŒå¿…è¦ã§ã™ã€‚";
                    } else {
                        feedbackEl.innerHTML = "<b class='text-red-500'>ã‚¹ãƒšãƒ«ãƒŸã‚¹ã‹ã‚‚ï¼Ÿ</b><br>å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ãŒæ··ã˜ã£ã¦ã„ãªã„ã‹ã€å‘½ä»¤ãŒæ­£ã—ã„ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚";
                    }
                }
            }
        };

        window.onload = () => app.init();
    </script>
</body>

</html>


